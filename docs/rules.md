# 갓필드 절대 규칙

> 이 문서는 갓필드의 모든 게임 규칙을 정의합니다. 모든 개발과 기획은 이 규칙을 기반으로 합니다.

## 세계관 및 목표

플레이어는 차기 지구신의 자리를 노리는 **'예언자'**가 되어, 태양신에게서 받은 **'성물(카드)'**을 사용해 **최후의 1인**이 될 때까지 생존해야 합니다.

## 플레이어 스탯 (고정)

### HP (체력)
- **시작**: 40
- **최대**: 99
- **0이 되면**: '승천'하며 패배

### MP (마력)
- **시작**: 10
- **최대**: 99
- **용도**: '기적(Miracle)' 성물 사용에 소모

### 金 (자금)
- **시작**: 20
- **최대**: 99
- **용도**: '거래(Trade)' 성물 사용에 소모

## 신(神)의 역할

### 신 선택
- 플레이어는 게임 시작 전, AI로 생성한 **'신'**을 하나 선택합니다.

### 신의 특징
- 신은 **스탯을 가지지 않습니다**.
- 대신 게임의 판도를 뒤엎는 **1~2개의 강력한 '고유 기적'**을 제공합니다.
- 이 기적은 게임 시작 시 플레이어의 **기적 목록에 저장**된 채로 시작됩니다.

### 예시
- **명왕신 하데스**: 고유 기적 `<어둠>` - 단일 대상에게 5의 암속성 피해 (MP 5 소모)

## 성물(聖物) 시스템

### 천계 덱 (공용 덱)
- 각 플레이어가 제출한 **7장의 일반 성물**을 모두 섞어 공용 덱을 구성합니다.
- 모든 플레이어는 이 공용 덱에서 카드를 뽑습니다.

### 손패
- **게임 시작**: 9장
- **턴 종료 시**: 사용한 만큼 보충
- **최대 보유**: 18장

### 성물 종류 (고정)

#### 무기(Weapon)
- 물리 공격용
- **속성**: 공격력, 내구도
- **특징**: `+공격력` 무기는 조합 가능

#### 방어구(Armor)
- 물리 방어용
- **속성**: 방어력
- **특징**: 한 번에 여러 장 사용 가능

#### 잡화(Item)
- 회복, 버프/디버프, 거래 등 다양한 효과

#### 기적(Miracle)
- MP를 소모하는 마법
- **특징**: 한 번 획득하면 MP만 충분하다면 계속 사용 가능
- **저장**: 별도의 공간에 저장됨 (손패와 별도)

## 속성 시스템 (고정)

### 7대 속성
- **무(無)**: 기본 속성, 상성 없음
- **화(火)**: 불
- **수(水)**: 물
- **목(木)**: 나무
- **토(土)**: 흙
- **광(光)**: 빛
- **암(暗)**: 어둠

### 상성 관계
- **화 ↔ 수**: 상극 관계
- **목 ↔ 토**: 상극 관계

### 특수 속성

#### 광(光) - 방어 불가
- 광속성 공격은 **방어 불가**
- 예외: '레인보우 커튼' 등으로 **무속성으로 변경 후** 방어 가능

#### 암(暗) - 즉사 속성
- **1 이상의 피해**를 입으면 HP와 관계없이 **즉시 승천**
- 예외: '태양의 가호'가 있으면 방어 가능

## 턴 행동 (고정)

자신의 턴에 아래 행동 중 **하나**를 선택합니다.

### 성물 사용
- 손패의 성물 1장을 사용합니다.
- 무기 공격, 아이템 사용, 기적 사용 등

### 기도(Pray)
- **조건**: 손패에 '무기'가 없을 때만 가능
- **효과**: 턴을 넘기고 성물 1장을 받습니다.

### 버리기(Discard)
- 필요 없는 성물을 버립니다.
- **주의**: 이 행동만으로는 새 성물을 받지 않습니다.

## 재앙(상태 이상) 시스템 (고정)

### 병 계열 (진행형)
1. **감기**: 경미한 디버프
2. **열병**: 중간 디버프
3. **지옥병**: 심각한 디버프
4. **천국병**: 매 턴 회복하지만 즉사 확률 보유

### 일반 재앙
- **안개**: 시야 차단 효과
- **섬광**: 눈부심 효과
- **꿈**: 환각 효과
- **먹구름**: 우울 효과

## 전투 시스템

### 위협(Threat) 단계
- 공격자가 무기를 사용하면 **위협 단계** 시작
- 게임 phase가 'threat'로 변경됨
- `threatInfo`에 공격 정보 저장: 공격자, 대상, 공격력, 속성

### 방어(Defend) 단계
- 대상 플레이어가 방어구를 사용하여 방어
- 방어력과 속성 상성을 계산하여 최종 피해 산출
- **암속성 즉사 판정**: 암속성 피해를 1 이상 받으면 즉시 승천

### 피해 계산
```
최종 피해 = 공격력 - 방어력
속성 상성 적용 (상극이면 피해 증가/감소)
암속성: 1 이상이면 즉시 승천
광속성: 방어 무시 (무속성 변환 예외)
```

## 종말의 시간 (서든데스)

- 설정된 턴 수가 되면 서든데스 시작
- 카드를 보충받을 때 일정 확률로 **'악마'** 출현
- 악마는 **방어 불가 피해**를 입힘
- 게임이 너무 길어지는 것을 방지

## 승리 조건

- **최후의 1인**이 될 때까지 생존
- 다른 모든 플레이어가 승천(HP 0 또는 암속성 피해)하면 승리

## DSL (Domain Specific Language)

성물의 효과는 DSL 코드로 정의됩니다.

### 주요 Op 코드
- `damage`: 피해 입히기
- `heal`: 회복
- `apply_disaster`: 재앙 부여
- `remove_disaster`: 재앙 제거
- `modify_stat`: 스탯 변경 (HP/MP/Gold)
- `draw`: 카드 뽑기
- `discard`: 카드 버리기
- `reflect_damage`: 피해 반사
- `absorb_hp`: 흡혈

### 예시
```json
{
  "dsl": [
    { "op": "damage", "amount": 5, "attribute": "火", "target": "enemy" },
    { "op": "heal", "amount": 3, "target_stat": "hp" }
  ]
}
```

## 게임 페이즈(Phase)

1. **main**: 메인 페이즈 - 플레이어가 행동 선택
2. **threat**: 위협 페이즈 - 공격 선언됨, 방어 대기
3. **trade**: 거래 페이즈 - 거래 진행 중
4. **resolve**: 해결 페이즈 - 효과 처리 중
5. **end**: 턴 종료 페이즈

## 장비 시스템

플레이어는 다음 장비 슬롯을 가집니다:
- **weapon**: 무기 1개
- **shield**: 방패 1개
- **accessory**: 장신구 1개

장비를 장착하면 지속 효과를 받을 수 있습니다.
