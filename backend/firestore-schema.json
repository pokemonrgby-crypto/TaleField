{
  "collections": {
    "profiles": {
      "doc": {
        "nickname": "string",
        "createdAt": "timestamp",
        "updatedAt": "timestamp"
      }
    },

    "shin": {
      "doc": {
        "id": "string",
        "ownerUid": "string",
        "name": "string",
        "description": "string",
        "uniqueMiracles": [
          {
            "name": "string",
            "cardType": "miracle",
            "attribute": "無|火|水|木|土|光|暗",
            "text": "string",
            "stats": {
              "mpCost": "number"
            },
            "dsl": "array"
          }
        ],
        "createdAt": "timestamp",
        "status": "pending|approved|blocked"
      }
    },

    "artifacts": {
      "doc": {
        "id": "string",
        "ownerUid": "string",
        "name": "string",
        "cardType": "weapon|armor|item|miracle",
        "attribute": "無|火|水|木|土|光|暗",
        "text": "string",
        "stats": {
          "attack": "number (optional)",
          "defense": "number (optional)",
          "durability": "number (optional)",
          "mpCost": "number (optional)",
          "goldValue": "number (optional)"
        },
        "disasterToApply": "string (optional) - 병|안개|섬광|꿈|먹구름",
        "dsl": [
          {
            "op": "string",
            "...": "various fields depending on op"
          }
        ],
        "checks": {
          "banned": "boolean",
          "version": "number",
          "validatorScore": "number",
          "errors": ["string"]
        },
        "status": "pending|approved|blocked",
        "createdAt": "timestamp"
      }
    },

    "rooms": {
      "doc": {
        "title": "string",
        "hostUid": "string",
        "hostNickname": "string",
        "status": "waiting|ready|playing|ended",
        "maxPlayers": "number (2-8)",
        "players": [
          {
            "uid": "string",
            "nickname": "string",
            "isHost": "boolean",
            "ready": "boolean",
            "shinId": "string (optional)",
            "selectedArtifactIds": ["string (7 items)"],
            "selectedSkills": ["string (deprecated)"]
          }
        ],
        "createdAt": "timestamp"
      }
    },

    "matches": {
      "doc": {
        "roomId": "string",
        "status": "playing|finished",
        "turn": "number",
        "currentPlayerUid": "string",
        "phase": "main|threat|trade|resolve",
        "players": {
          "uid": {
            "nickname": "string",
            "hp": "number (0-99, start: 40)",
            "mp": "number (0-99, start: 10)",
            "gold": "number (0-99, start: 20)",
            "hand": [
              {
                "instanceId": "string",
                "artifactId": "string",
                "cardType": "weapon|armor|item|miracle",
                "name": "string",
                "attribute": "string",
                "stats": "object",
                "dsl": "array"
              }
            ],
            "miracles": [
              {
                "name": "string",
                "cardType": "miracle",
                "mpCost": "number",
                "dsl": "array"
              }
            ],
            "equipment": {
              "weapon": "Card | null",
              "shield": "Card | null",
              "accessory": "Card | null"
            },
            "disasters": [
              {
                "name": "string (병|안개|섬광|꿈|먹구름)",
                "level": "number (for 병: 1=감기, 2=열병, 3=지옥병, 4=천국병)"
              }
            ]
          }
        },
        "commonDeck": [
          {
            "instanceId": "string",
            "artifactId": "string",
            "ownerUid": "string",
            "cardType": "weapon|armor|item|miracle",
            "name": "string",
            "attribute": "string",
            "stats": "object",
            "dsl": "array"
          }
        ],
        "discardPile": ["Card"],
        "threatInfo": {
          "attackerUid": "string",
          "targetUid": "string",
          "attackValue": "number",
          "attribute": "string",
          "weaponCard": "Card"
        },
        "logs": [
          {
            "turn": "number",
            "action": "string",
            "details": "string"
          }
        ],
        "suddenDeathTurn": "number (optional)",
        "createdAt": "timestamp"
      }
    }
  }
}
